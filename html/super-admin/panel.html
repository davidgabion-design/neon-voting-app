<section id="superAdminPanel" class="screen">
  <div class="card">
    <div class="section-title">
      <div>
        <h2 style="margin:0;font-size:18px"><i class="fas fa-crown"></i> <span data-i18n="super_admin">Super Admin</span></h2>
        <div class="subtext" data-i18n="super_admin_desc">Create organizations, approve elections, manage settings.</div>
      </div>
      <div class="row">
        <select id="superAdminLangSelect" class="input" style="max-width:110px;padding:6px 10px;font-size:13px" title="Change Language">
          <option value="ENG">üá¨üáß ENG</option>
          <option value="SPA">üá™üá∏ SPA</option>
          <option value="FRE">üá´üá∑ FRE</option>
          <option value="POR">üáµüáπ POR</option>
          <option value="TWI">üá¨üá≠ TWI</option>
        </select>
        <button class="btn neon-btn-outline logout-btn"><i class="fas fa-sign-out-alt"></i> <span data-i18n="logout">Logout</span></button>
        <button id="super-back" class="btn neon-btn-outline"><i class="fas fa-home"></i> <span data-i18n="gateway">Gateway</span></button>
      </div>
    </div>

    <!-- Updated tabs with Global Dashboard -->
    <div id="superTabs" class="tabs" role="tablist" aria-label="Super Admin Tabs">
      <button class="tab-btn active" data-super-tab="dashboard">
        <i class="fas fa-globe"></i>
        <span data-i18n="dashboard">Dashboard</span>
      </button>
      <button class="tab-btn" data-super-tab="orgs">
        <i class="fas fa-building"></i>
        <span data-i18n="organizations">Organizations</span>
      </button>
      <button class="tab-btn" data-super-tab="approvals">
        <i class="fas fa-clipboard-check"></i>
        <span data-i18n="approvals">Approvals</span>
      </button>
      <button class="tab-btn" data-super-tab="admins">
        <i class="fas fa-user-shield"></i>
        <span data-i18n="administrators">Administrators</span>
      </button>

      <div style="flex:1"></div>

      <button class="tab-btn" data-super-tab="settings">
        <i class="fas fa-gear"></i>
        <span data-i18n="settings">Settings</span>
      </button>
      <button class="tab-btn danger" data-super-tab="danger">
        <i class="fas fa-triangle-exclamation"></i>
        <span data-i18n="danger">Danger</span>
      </button>
    </div>

    <div style="margin-top:14px">
      <!-- Global Dashboard Tab (NEW) -->
      <div id="superContent-dashboard">
        <!-- Status Banner -->
        <div class="status-banner active">
          <i class="fas fa-sync"></i>
          Live system monitoring enabled
        </div>
        
        <!-- Dashboard Header -->
        <div class="dashboard-header">
          <div>
            <h3 style="margin:0"><i class="fas fa-globe"></i> <span data-i18n="global_dashboard">Global Dashboard</span></h3>
            <p class="subtext" data-i18n="live_overview">Live overview of elections and voting activity</p>
          </div>
          <div class="refresh-controls">
            <div class="sync-indicator">
              <div class="sync-pulse"></div>
              <span>Live Sync Active</span>
            </div>
            <div class="time-filter">
              <button class="time-filter-btn active" onclick="setDashboardTimeFilter('24h')">24h</button>
              <button class="time-filter-btn" onclick="setDashboardTimeFilter('7d')">7d</button>
              <button class="time-filter-btn" onclick="setDashboardTimeFilter('30d')">30d</button>
              <button class="time-filter-btn" onclick="setDashboardTimeFilter('all')">All</button>
            </div>
            <button class="btn" style="padding: 8px 12px; font-size: 12px" onclick="refreshDashboard()">
              <i class="fas fa-sync"></i> Refresh
            </button>

          <div class="export-actions" style="margin-top:10px; display:flex; gap:10px; flex-wrap:wrap;">
            <button class="btn" onclick="exportResultsCSV(window.currentOrgId)"><i class="fas fa-file-csv"></i> Export Results (CSV)</button>
            <button class="btn" onclick="exportResultsPDF(window.currentOrgId)"><i class="fas fa-file-pdf"></i> Export Results (PDF)</button>
            <button class="btn secondary" onclick="exportAuditCSV(window.currentOrgId)"><i class="fas fa-clipboard-list"></i> Export Audit (CSV)</button>
          </div>
          </div>
        </div>

        <!-- Real-time Stats -->
        <div class="dashboard-stats-grid">
          <div class="dashboard-stat-card">
            <div class="dashboard-stat-label" data-i18n="total_organizations">Total Organizations</div>
            <div class="dashboard-stat-value" id="statOrganizations">0</div>
            <div class="dashboard-stat-change change-positive" id="statOrgsChange">Loading...</div>
          </div>
          <div class="dashboard-stat-card">
            <div class="dashboard-stat-label" data-i18n="active_elections">Active Elections</div>
            <div class="dashboard-stat-value" id="statActiveElections">0</div>
            <div class="dashboard-stat-change change-positive" id="statElectionsChange">Live</div>
          </div>
          <div class="dashboard-stat-card">
            <div class="dashboard-stat-label" data-i18n="total_votes_today">Total Votes Today</div>
            <div class="dashboard-stat-value" id="statVotesToday">0</div>
            <div class="dashboard-stat-change change-positive" id="statVotesChange">+0% from yesterday</div>
          </div>
          <div class="dashboard-stat-card">
            <div class="dashboard-stat-label" data-i18n="total_voters">Total Voters</div>
            <div class="dashboard-stat-value" id="statTotalVoters">0</div>
            <div class="dashboard-stat-change change-positive" id="statVotersChange">+0 this week</div>
          </div>
          <div class="dashboard-stat-card">
            <div class="dashboard-stat-label" data-i18n="avg_turnout">Avg. Turnout</div>
            <div class="dashboard-stat-value" id="statAvgTurnout">0%</div>
            <div class="dashboard-stat-change change-positive" id="statTurnoutChange">+0% trend</div>
          </div>
          <div class="dashboard-stat-card">
            <div class="dashboard-stat-label" data-i18n="pending_approvals">Pending Approvals</div>
            <div class="dashboard-stat-value" id="statPendingApprovals">0</div>
            <div class="dashboard-stat-change change-negative" id="statApprovalsChange">Needs attention</div>
          </div>
        </div>

        <!-- Live Charts Container -->
        <div class="live-charts-container">
          <div class="chart-container">
            <div class="chart-title"><i class="fas fa-chart-line"></i> Votes Per Hour (Last 24 Hours)</div>
            <canvas id="votesChart"></canvas>
          </div>
          <div class="chart-container">
            <div class="chart-title"><i class="fas fa-chart-pie"></i> Election Status Distribution</div>
            <canvas id="electionsChart"></canvas>
          </div>
        </div>

        <!-- Recent Activity -->
        <div style="margin-top: 24px">
          <div class="section-title">
            <h3 style="margin:0"><i class="fas fa-history"></i> Recent Activity</h3>
            <button class="btn" style="padding: 6px 12px; font-size: 11px" onclick="loadActivityFeed()">
              <i class="fas fa-redo"></i> Load More
            </button>
          </div>
          <div class="activity-timeline" id="activityFeed">
            <!-- Activity items will be loaded here -->
          </div>
        </div>

        <!-- Organizations Overview -->
        <div style="margin-top: 24px">
          <div class="section-title">
            <h3 style="margin:0"><i class="fas fa-building"></i> Organizations Overview</h3>
            <button class="btn neon-btn" style="padding: 8px 12px; font-size: 12px" onclick="showAllOrganizations()">
              <i class="fas fa-list"></i> View All
            </button>
          </div>
          <div class="org-grid" id="orgOverviewGrid">
            <!-- Organization cards will be loaded here -->
          </div>
        </div>

        <!-- Live Data Sync Status -->
        <div class="data-management" style="margin-top: 24px">
          <div class="data-management-header">
            <h4 style="margin:0"><i class="fas fa-sync"></i> Live Data Sync Status</h4>
            <span class="badge success">Connected</span>
          </div>
          <div class="subtext" style="margin-bottom: 12px">
            Real-time synchronization between EC interfaces and global dashboard. 
            Data updates instantly when ECs make changes.
          </div>
          <table class="data-table">
            <thead>
              <tr>
                <th>Data Type</th>
                <th>Last Sync</th>
                <th>Status</th>
                <th>Records</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td>Organizations</td>
                <td id="syncOrgsTime">Just now</td>
                <td><span class="badge success">Active</span></td>
                <td id="syncOrgsCount">0</td>
              </tr>
              <tr>
                <td>Voters</td>
                <td id="syncVotersTime">Just now</td>
                <td><span class="badge success">Active</span></td>
                <td id="syncVotersCount">0</td>
              </tr>
              <tr>
                <td>Positions</td>
                <td id="syncPositionsTime">Just now</td>
                <td><span class="badge success">Active</span></td>
                <td id="syncPositionsCount">0</td>
              </tr>
              <tr>
                <td>Candidates</td>
                <td id="syncCandidatesTime">Just now</td>
                <td><span class="badge success">Active</span></td>
                <td id="syncCandidatesCount">0</td>
              </tr>
              <tr>
                <td>Votes</td>
                <td id="syncVotesTime">Just now</td>
                <td><span class="badge success">Active</span></td>
                <td id="syncVotesCount">0</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Organizations Tab -->
      <div id="superContent-orgs" style="display:none">
        <div class="row" style="justify-content:space-between; margin-bottom:12px">
          <div class="subtext">Manage organizations and their elections.</div>
          <button class="btn neon-btn" onclick="showCreateOrgModal()"><i class="fas fa-plus"></i> Create Organization</button>
        </div>
        <div id="super-org-list" style="margin-top:10px"></div>
      </div>

      <!-- Approvals Tab -->
      <div id="superContent-approvals" style="display:none">
        <h3 style="margin:0 0 12px"><i class="fas fa-clipboard-check"></i> Pending Approvals</h3>
        <div class="subtext" style="margin-bottom:12px">Review and approve/reject election submissions from ECs.</div>
        <div id="superApprovalList"></div>
      </div>

      <!-- Administrators Tab -->
      <div id="superContent-admins" style="display:none">
        <!-- Content will be dynamically loaded by administrators.js -->
      </div>
      
      <!-- Invite Analytics Tab (for future use) -->
      <div id="superContent-invites-analytics" style="display:none">
        <h3 style="margin:0 0 12px"><i class="fas fa-chart-line"></i> Invitation Analytics</h3>
        <div class="subtext" style="margin-bottom:12px">Track and analyze invitation engagement across all organizations.</div>
        <div id="superInviteAnalytics"></div>
      </div>

      <!-- Settings Tab -->
      <div id="superContent-settings" style="display:none">
        <div class="grid">
          <div class="col-6">
            <div class="card" style="padding:14px">
              <h3 style="margin:0 0 8px">Change SuperAdmin Password</h3>
              <div class="subtext">Minimum 8 characters.</div>
              <label class="label">New Password</label>
              <input id="new-super-pass" class="input" type="password" placeholder="New password"/>
              <button class="btn neon-btn" style="margin-top:12px" onclick="changeSuperPassword()">
                <i class="fas fa-key"></i> Update Password
              </button>
            </div>
          </div>
          <div class="col-6">
            <div class="card" style="padding:14px">
              <h3 style="margin:0 0 8px">Firebase Status</h3>
              <div class="subtext">Current Firebase connection status.</div>
              <div id="firebaseStatusDisplay" style="margin:10px 0">
                <div class="badge info">Checking...</div>
              </div>
              <button class="btn neon-btn-outline" style="margin-top:12px" onclick="checkFirebaseStatus()">
                <i class="fas fa-sync"></i> Refresh Status
              </button>
            </div>
          </div>
          <div class="col-12">
            <div class="card" style="padding:14px; margin-top:14px">
              <h3 style="margin:0 0 8px">Data Sync Configuration</h3>
              <div class="subtext">Configure real-time data synchronization settings.</div>
              
              <div style="margin-top:12px">
                <label style="display:flex; align-items:center; gap:8px; margin-bottom:8px">
                  <input type="checkbox" id="enableRealtimeSync" checked>
                  <span>Enable real-time data sync</span>
                </label>
                <label style="display:flex; align-items:center; gap:8px; margin-bottom:8px">
                  <input type="checkbox" id="enableAutoRefresh" checked>
                  <span>Auto-refresh dashboard every 30 seconds</span>
                </label>
                <label style="display:flex; align-items:center; gap:8px; margin-bottom:8px">
                  <input type="checkbox" id="enableActivityLogging" checked>
                  <span>Log all EC activity to dashboard</span>
                </label>
                
                <button class="btn neon-btn" style="margin-top:12px" onclick="saveSyncSettings()">
                  <i class="fas fa-save"></i> Save Sync Settings
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Danger Zone Tab -->
      <div id="superContent-danger" style="display:none">
        
        <!-- Archive Management Section -->
        <div class="card" style="padding:20px; border-color: rgba(255,193,7,0.3); margin-bottom:20px">
          <h3 style="margin:0 0 8px; color:#ffc107">
            <i class="fas fa-box-archive"></i> Archive Management
          </h3>
          <div class="subtext" style="margin-bottom:15px">
            Archived organizations are hidden and disabled but can be restored within 30 days
          </div>
          <div style="display:grid; gap:10px;">
            <button class="btn" style="border-color: rgba(255,193,7,0.4); background:rgba(255,193,7,0.1); color:#ffc107" onclick="loadArchivedOrganizations()">
              <i class="fas fa-archive"></i> View Archived Organizations
            </button>
            <div id="archivedOrgsList" style="margin-top:10px"></div>
          </div>
        </div>

        <!-- Suspend Management Section -->
        <div class="card" style="padding:20px; border-color: rgba(255,152,0,0.3); margin-bottom:20px">
          <h3 style="margin:0 0 8px; color:#ff9800">
            <i class="fas fa-pause-circle"></i> Suspend Management
          </h3>
          <div class="subtext" style="margin-bottom:15px">
            Suspended organizations are temporarily disabled but visible in lists
          </div>
          <div style="display:grid; gap:10px;">
            <button class="btn" style="border-color: rgba(255,152,0,0.4); background:rgba(255,152,0,0.1); color:#ff9800" onclick="loadSuspendedOrganizations()">
              <i class="fas fa-hand"></i> View Suspended Organizations
            </button>
            <div id="suspendedOrgsList" style="margin-top:10px"></div>
          </div>
        </div>

        <!-- Permanent Deletion Section -->
        <div class="card" style="padding:20px; border-color: rgba(255,75,75,0.3)">
          <h3 style="margin:0 0 8px; color:#ff4444">
            <i class="fas fa-triangle-exclamation"></i> Permanent Deletion
          </h3>
          <div class="subtext" style="margin-bottom:15px">
            Access organization deletion with enhanced security features
          </div>
          <button class="btn" style="border-color: rgba(255,75,75,0.4); background:rgba(255,75,75,0.1); color:#ff4444" onclick="showTab('superContent-delete')">
            <i class="fas fa-trash-alt"></i> Manage Organization Deletion
          </button>
        </div>

        <!-- System Reset Section -->
        <div class="card" style="padding:20px; border-color: rgba(255,75,75,0.4); margin-top:20px; border:2px dashed rgba(255,75,75,0.3)">
          <h3 style="margin:0 0 8px; color:#ff4444">
            <i class="fas fa-bomb"></i> System Reset
          </h3>
          <div class="subtext" style="margin-bottom:15px; color:#ff9999">
            ‚ö†Ô∏è <strong>EXTREME DANGER:</strong> This will delete ALL organizations, voters, votes, and settings from the entire system
          </div>
          <button class="btn" style="border-color: rgba(255,75,75,0.5); background:rgba(255,75,75,0.15); color:#ff4444" onclick="resetAppData()">
            <i class="fas fa-bomb"></i> Reset Entire System
          </button>
        </div>
      </div>
    </div>
  </div>
</section>
